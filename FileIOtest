package group_project;

import java.io.*;
import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

public class FileIOtest {
    private File file;
    private ArrayList<Patient> patientArray = new ArrayList<>();

    public FileIOtest(File file) {
        this.file = file;
        int count = 0;
        int k = -1;
        int rows = 0;

        try {
            Scanner scnr = new Scanner(file);
            while(scnr.hasNextLine()) {
                scnr.nextLine();
                rows++;
            }
            scnr.close();
        } catch (FileNotFoundException fileNotFoundException) {
            fileNotFoundException.printStackTrace();
        }

        for (int i = 0; i < rows - 1; i++) {
            Patient newPatient = new Patient();
            patientArray.add(newPatient);
        }


        try  {
            BufferedReader in = new BufferedReader(new FileReader(file));
            String line = "";
            String delim = ",";

            while((line = in.readLine()) != null) {
                System.out.println(count);
                    if (count > 0 && k < (rows - 1)) {
                        String[] tokens = line.split(delim);

                        patientArray.get(k).setID(Integer.parseInt(tokens[0]));
                        patientArray.get(k).setLastName(tokens[1]);
                        patientArray.get(k).setFirstName(tokens[2]);
                        patientArray.get(k).setVaccineType(tokens[3]);
                        patientArray.get(k).setVaccinationDate(tokens[4]);
                        patientArray.get(k).setVaccineLocation(tokens[5]);
                    }
                    count++;
                    k++;
            }
        }

        catch (IOException e) {
            System.out.println("File read error");
        }
    }
    public ArrayList<Patient> getArray() {
        return patientArray;
    }
}

